---
title: "Технические трудности"
id: 2
icon: fal fa-laptop-code
private: true
---

### Внедрение P2P-сети на мобильных устройствах

#### Ограничения на мобильных платформах:

* Сотовая связь более проблематична:
    * Обход NAT труднее достичь
    * Соединения менее надежны
    * Соединения обычно медленнее с более высоким пингом
    * Тарифы на передачу данных имеют ограниченные дневные/ежемесячные квоты
* Меньше мощности процессора
* Меньшее максимальное количество одновременных сетевых подключений
* Ограниченное время автономной работы
* Меньшее количество процессорного времени, выделенного приложению (приложение в фоновом режиме)

#### Некоторые проекты, реализующие P2P на мобильных устройствах

* `Textile.io`, вероятно, самый известный проект, который создает мобильные приложения через IPFS путем запуска полного узла на мобильных устройствах с помощью gomobile. У них уже выпущено несколько приложений (включая чисто демонстрационные) и SDK.
* `Jami.net` делает P2P на мобильных устройствах, они сосредоточены на предоставлении прямого конкурента Skype, включая такие функции, как аудиовызов.
* `status.im`: Status приносит мощь Ethereum в карман пользователя, объединяя мессенджер, криптокошелек и Web3 браузер.
* `matrix.org`: Matrix обязана своим названием своей способности объединять существующие платформы в глобальную открытую матрицу коммуникации. Matrix - это скорее децентрализованное хранилище разговоров, чем протокол обмена сообщениями.

#### Как Berty решает это

* `Gomobile-IPFS`: репозиторий, созданный Berty Technologies, целью которого является предоставление пакетов для Android, iOS и React Native, которые позволяют запускать и использовать узел IPFS на мобильных устройствах.
* `Berty Protocol`: в настоящее время мы разрабатываем протокол, который может использовать каждый в своих проектах для создания безопасных P2P-приложений, работающих как на настольных компьютерах, так и на мобильных устройствах.
* `Berty Messenger`: конкретный пример простого приложения, построенного на основе Berty Protocol, разработанного для нетехнических специалистов, пытающегося донести P2P на мобильных устройствах до массового пользователя.

### Сохранение конфиденциальности и безопасность связи в распределенной среде

#### Ограничения

Убедиться, что "вы такой, каким вы себя называете" - это фундаментальная проблема кибербезопасности. В централизованной среде есть орган, который может проверять удостоверения, подписи, ключи шифрования и так далее. В распределенной среде нам нужно найти способы достижения доверия между одноранговыми узлами без центральной власти.

В распределенной системе мы не можем гарантировать порядок поступления сообщений. Это становится особой проблемой для мессенджера, работающего в автономном режиме, поскольку сообщения, которые были отправлены вне сети, могут некорректно синхронизироваться, когда устройство снова выходит в онлайн. Это может вызвать проблемы, в основном при шифровании сообщений с помощью алгоритмов Perfect Forward Secrecy, использующих ротацию ключей шифрования.

Метаданные необходимы для работы системы обмена сообщениями. Однако они могли бы стать важным источником информации, если бы были собраны и проанализированы.

#### Похожие

* `Signal.org`: золотой стандарт для любой централизованной среды. Berty использует многие из своих криптографических алгоритмов/протоколов, адаптировав их для распределенной среды. Они прилагают все усилия для того, чтобы максимально ограничить свои метаданные, но их серверы по-прежнему хранятся в Google Cloud и автоматически подпадают под действие закона об Облаке.
* `Messaging Layer Security`: MLS предлагает более масштабируемую альтернативу протоколу Signal. Для работы этого решения по-прежнему требуется центральный сервер.
* `Olvid.io`: Olvid утверждает, что является единственной службой обмена сообщениями, которая также шифрует метаданные. Они централизованы и размещают свои серверы на AWS, что также относится к закону об Облаках.
* `status.im`: Status разработан Whisper для преодоления некоторых из вышеперечисленных недостатков и может быть настроен для конечного пользователя, который должен иметь возможность указать, какой компромисс между временем автономной работы и мобильным устройством, платой за данные, конфиденциальностью и возможной утечкой метаданных.

#### Как Berty решает это

* `go-ipfs-log`: ipfs-log - базовый уровень orbit-db - это распределенный одноранговый журнал сообщений в IPFS, использующий CRDT для согласованности порядка сообщений. Эта библиотека с открытым исходным кодом намеревается предоставить полностью совместимую версию JavaScript в Go.
* `go-orbit-db`: orbit-db - это распределенная одноранговая база данных в IPFS, построенная на основе go-ipfs-log. Большая часть его кода взята из проекта JavaScript orbit-db. Этот проект намеревается предоставить полностью совместимую версию JavaScript в Go.
* ` Berty-Protocol `: протокол использует, среди прочего, NaCl и Symmetric-ratchet Signal для обеспечения надежности идентификации в сети и шифрования сообщений с помощью Perfect Forward Secrecy. Помимо поиска способа скрыть публичные IP-адреса в IPFS, мы пытаемся максимально уменьшить утечку метаданных:
    * Для регистрации не требуется телефон/электронная почта
    * Опциональные серверы репликации с нулевым разглашением
    * Вращение точек встречи и идентификаторов пиров
    * Шифрование метаданных (насколько это возможно)
    * Генерация шумов

### Офлайн-связь между разными типами устройств

#### Ограничения
Чтобы обеспечить автономную связь (Berty - это приложение для обмена сообщениями, ориентированное прежде всего на офлайн), мы рассмотрим два типа технологий:
- Bluetooth Low Energy - это энергосберегающая технология, но ее производительность ограничена (её достаточно для отправки текста). Трудно реализовать, особенно с Android API. Однако его преимущество заключается в том, что он работает между разными платформами (Darwin (iOS, macOS), Android и другие).
- Apple Multipeer Connectivity (AirDrop) и Android Nearby позволяют одноранговым узлам устанавливать прямое соединение Wi-Fi с использованием BLE, которое обеспечивает гораздо большую производительность, чем только BLE. Также намного проще реализовать драйвер с использованием этих технологий. Однако они зависят от платформы и работают только между устройствами одного типа: от Android к Android и от Darwin к Darwin.

#### Как Berty решает это

- В настоящее время мы реализуем драйвер MPConnectivity, который будет транспортом по умолчанию для связи между устройствами Apple (Mac и iPhone).
- После этого мы планируем внедрить драйвер для Android Nearby, который будет транспортом по умолчанию для связи между устройствами Android.
- После двух указанных выше драйверов мы планируем реализовать универсальный драйвер BLE для Android и iOS, который будет резервным транспортом для межплатформенного взаимодействия.

С помощью сообщества мы также могли бы также реализовать универсальные BLE драйверы для Linux и Windows.

Для получения дополнительной информации по этому вопросу вы можете прочитать эту [специальную статью](https://berty.tech/blog/bluetooth-low-energy/).
